AWSTemplateFormatVersion: '2010-09-09'
Description: Alexa Rain Drop Setup 1.0.0
Resources:
 AlexaRainDropIamRole:
   Type: AWS::IAM::Role
   Properties:
     AssumeRolePolicyDocument:
       Version: '2012-10-17'
       Statement:
       - Effect: Allow
         Principal:
           Service:
           - lambda.amazonaws.com
         Action:
         - sts:AssumeRole
     Path: "/"
     Policies:
     - PolicyName: AlexaRainDrop
       PolicyDocument:
         Version: '2012-10-17'
         Statement:
         - Effect: Allow
           Action:
           - logs:*
           Resource: arn:aws:logs:*:*:*
 AlexaRainDropLambdaFunction:
   Type: "AWS::Lambda::Function"
   Properties:
     Code:
       ZipFile: |
         test
     Description: Alexa Rain Drop Function
     FunctionName: AlexaRainDrop
     Handler: lambda_function.lambda_handler
     Role: !GetAtt AlexaRainDropIamRole.Arn 
     Runtime: python2.7
     Timeout: 3
   DependsOn: AlexaRainDropIamRole
 AlexaSkillFunctionPermissions:
   Type: AWS::Lambda::Permission
   Properties:
     FunctionName: AlexaRainDrop
     Action: lambda:InvokeFunction
     Principal: alexa-appkit.amazon.com
   DependsOn: AlexaRainDropLambdaFunction

Outputs:
 AlexaRainDropIamRoleArn:
   Description: Alexa Rain Drop IAM role ARN
   Value:
     !GetAtt AlexaRainDropIamRole.Arn
   Export:
     Name: AlexaRainDropIamRoleArn
 AlexaRainDropFunctionArn:
   Description: Alexa Rain Drop Function Arn
   Value:
     !GetAtt AlexaRainDropLambdaFunction.Arn
   Export:
     Name: AlexaRainDropFunctionName
